\input{preamble.tex}

\bibliography{all}
\begin{document}

\title{Postnikov Towers in Combinatorial Simplicial Model Categories}
\date{}
\maketitle

{\footnotesize
\tableofcontents
}

\section{Truncated and Connected Simplicial Sets}

\begin{definition}\label{defn:truncated_simp}
  A simplicial set \(X\) is called \emph{\(n\)--truncated} for
  \(n\geq-1\) if \(\pi_{i}(X,x) = *\) for every \(x\in X_{0}\) and
  every \(i>n\). A morphism \(f\colon Y\to X\) of simplicial sets is
  called \emph{\(n\)--truncated} if every homotopy fiber of \(f\)
  is \(n\)--truncated.

  By convention, a simplicial set is \((-2)\)--truncated if and only
  if it is contractible; a map of simplicial sets is
  \((-2)\)--truncated if it is a weak equivalence.
\end{definition}

\begin{lemma}\label{lem:truncated-diagonal}
  A simplicial set \(X\) is \(n\)--truncated if and only if the
  diagonal \(\Delta\colon X\to X\times X\) is \((n-1)\)--truncated.
\end{lemma}
\begin{proof}
  Let \(X\) be any connected simplicial set and let \((a,b)\in X\times
  X\). Let \(P\) be the homotopy fiber of \(\Delta\) at \((a,b)\).
  Any path from \(a\) to \(b\) in \(X\) induces a homotopy equivalence
  \(\Omega_{a}X \simeq P \simeq \Omega_{b} X\), hence isomorphisms
  \(\pi_{i+1}(X)\cong \pi_{i}(P)\). This proves the claim for
  connected simplicial sets. For the general case, write \(X =
  \bigsqcup_{j\in I} X_{j}\) as a disjoint union of its connected
  components and observe that \(X\times X = \bigsqcup_{j,\ell\in I}
  X_{j}\times X_{\ell}\). Then the homotopy fiber of the diagonal over a
  point \((a,b)\in X_{j}\times X_{\ell}\) is either empty (if \(j\neq
  \ell\)) or homotopy equivalent to \(\Omega_{a}X_{j}\) (if \(j =
  \ell\)). Since \(X\) is \(n\)--truncated if and only if all its
  connected components are \(n\)--truncated, this reduces the problem
  to the case of connected simplicial sets, which we have already
  dealt with.
\end{proof}

\begin{lemma}\label{lem:relative-truncated-diagonal}
  A map \(f\colon Y\to X\) of simplicial sets is \(n\)--truncated if
  and only if the diagonal \(\Delta_{f}\colon Y\to Y\times^{h}_{X} Y\)
  is \((n-1)\)--truncated.
\end{lemma}
\begin{proof}
  We can assume that \(f\) is a fibration between fibrant simplicial
  sets. If \(x\in X\) then the homotopy fiber of \(f\) is just the
  ordinary fiber product \(Y_{x}\coloneqq \{x\}\times_{X} Y\). Observe
  that \(\Delta_{f}\) is weakly equivalent to the fibration
  \(Y^{\Delta^{1}}\to Y\times_{X} Y\) and \(Y\times_{X}^{h} Y \simeq
  Y\times_{X} Y\). Given any \((y, y')\in Y\times_{X} Y\), let \(x =
  f(y) = f(y')\). Then there is a commutative diagram
  \[
  \begin{tikzcd}
    \Omega_{y} Y_{x} \arrow[r] \arrow[d] & Y_{x}^{\Delta^{1}} \arrow[r] \arrow[d] & Y^{\Delta^{1}} \arrow[d] \\
    * \arrow[r, "{(y,y')}"'] & Y_{x}\times Y_{x} \arrow[r] & Y\times_{X} Y
  \end{tikzcd}
  \]
  in which both small squares are cartesian. It follows that the
  homotopy fiber of \(\Delta_{f}\) at \((y,y')\) is weakly equivalent
  to the homotopy fiber of \(\Delta\colon Y_{x}\to Y_{x}\times
  Y_{x}\). Hence, all homotopy fibers of \(\Delta_{f}\) are
  \((n-1)\)--truncated if and only if all homotopy fibers of all
  diagonals \(Y_{x}\to Y_{x}\times Y_{x}\) are. By
  \autoref{lem:truncated-diagonal} this is the case if and only if all
  \(Y_{x}\) are \(n\)--truncated, \ie~if and only if the map \(Y\to
  X\) is \(n\)--truncated.
\end{proof}

\begin{corollary}\label{cor:truncatedness-makes-sense}
  A simplicial set \(X\) is \(n\)--truncated if and only if for every
  simplicial set \(Z\) the derived mapping space \(\RHom(Z, X)\) is
  \(n\)--truncated. A map \(f\colon X\to Y\) is \(n\)--truncated if
  and only if for every \(Z\) the map \(f_{*}\colon \RHom(Z,
  X)\to\RHom(Z, Y)\) is \(n\)--truncated.
\end{corollary}
\begin{proof}
  The proof proceeds by induction on \(n\). By
  \autoref{lem:relative-truncated-diagonal} a map \(f\colon Y\to X\)
  is \(n\)--truncated if and only if \(\Delta_{f}\colon Y\to
  Y\times_{X}^{h} Y\) is \((n-1)\)--truncated. By induction this is
  the case if and only if \(\RHom(Z,Y)\to \RHom(Z, Y\times_{X}^{h}
  Y)\) is \((n-1)\)--truncated. Observe that
  \[
  \begin{tikzcd}
    \RHom(Z,Y) \arrow[r] \arrow[dr] & \RHom(Z, Y\times^{h}_{X} Y) \arrow[d, "\simeq"] \\
    {} & \RHom(Z, Y)\times_{\RHom(Z, X)}^{h} \RHom(Z,Y)
  \end{tikzcd}
  \]
  commutes. Hence, \(\Delta_{f_{*}}\) is \((n-1)\)--truncated as well
  and again by \autoref{lem:relative-truncated-diagonal} this is
  equivalent to \(f_{*}\colon \RHom(Z, Y)\to\RHom(Z, X)\) being
  \(n\)--truncated.
\end{proof}

\begin{definition}\label{defn:connect_simp}
  Let \(n\geq 0\). A (nonempty) simplicial set \(X\) is called
  \emph{\(n\)--connected} if \(\pi_i(X,x) = *\) for every \(i\leq n\)
  and every \(x\in X_{0}\). A morphism \(f\colon Y\to X\) of
  simplicial sets is \emph{\(n\)--connected} or an
  \emph{\(n\)--equivalence} if all its homotopy fibers are
  \(n\)--connected.

  By convention, a simplicial set is \((-1)\)--connected if and only
  if it is nonempty and a map is a \((-1)\)--equivalence if it is
  surjective. Every simplicial set and every map of simplicial sets is
  \((-2)\)--connected.
\end{definition}

\begin{lemma}\label{lem:connected-homotopy-grps}
  Let \(n\geq 0\) and let \(f\colon Y\to X\) be a map of simplicial
  sets. Then \(f\) is \(n\)--connected if and only if, for every
  choice of \(y\in Y_{0}\), the induced map
  \(f_{*}\colon \pi_i(Y,y)\to\pi_{i}(X,f(y))\) is an isomorphism for
  \(i \leq n\) and an epimorphism for \(i = n+1\).
\end{lemma}
\begin{proof}
  Without loss of generality we can assume that \(f\) is a fibration
  between fibrant simplicial sets. Let \(y\in Y_{0}\) and write
  \(P = f^{-1}(f(y))\) for the fiber of \(f\) at \(f(y)\). The long
  exact sequence of \(f\) provides exact sequences
\[
  \pi_{i+1}(P,y) \to \pi_{i+1}(Y, y) \to \pi_{i+1}(X,f(y)) \to
  \pi_{i}(P,y)
\]
for \(i\geq 0\) which proves the lemma.
\end{proof}

\begin{remark}
  \autoref{lem:connected-homotopy-grps} justifies the terminology
  \enquote{\(n\)--equivalence} for \(n\)--connected maps: A map
  \(f\colon Y\to X\) between \(n\)--truncated simplicial sets \(Y\)
  and \(X\) is a weak equivalence if and only if it is \(n\)--connected.
\end{remark}

\begin{definition}\label{defn:trunc_functor}
  A functor \(\trunc{n}\colon \sset \to \sset\) with a natural
  transformation \(\eta\colon \id\to\trunc{n}\) is an \emph{\Th{n}
    truncation functor} if
  \begin{itemize}
  \item \(\trunc{n}X\) is \(n\)--truncated for all \(X\in\sset\).
  \item the map \(\eta_X\colon X\to\trunc{n}X\) is an \(n\)--equivalence.
  \end{itemize}
\end{definition}

\viktor{Change notation of \(\sset_{\leq n}\) so as not to conflict
  with general notation \(\mathbf M_{\leq n}\),}
We will now construct explicit truncation functors for the category
\(\sset\) of simplicial sets. First, the simplex category
\(\simplex\), when regarded as the category of nonzero finite
ordinals, has a natural filtration by full subcategories
\[
* = \simplex_{\leq 0} \subset \simplex_{\leq 1} \subset\cdots\subset\simplex
\]
where \(\simplex_n\) is the category of nonzero finite ordinals less than
or equal to \(n\). This induces a tower of functors
\[
\sset \to \cdots \to \sset_{\leq 1} \to \sset_{\leq 0} = \set
\]
and we write \(\iota_n^*\colon \sset \to \sset_{\leq n}\) for the
restriction functors.

By general abstract nonsense the functors \(\iota_n^*\) extend to
adjunctions
\[
(\iota_n)_! \dashv \iota_n^* \dashv (\iota_n)_*,
\]
see e.\,g.~\cite[Theorem~4, p.~59]{sheavesgeometrylogic} or
\cite[{Exposé}~i, Proposition~5.1]{SGA4-1}. Composing these, we get an
adjunction
\[
\sk_n = (\iota_n)_{!}\iota_n^{*} \dashv (\iota_n)_{*}\iota_n^{*} = \cosk_n.
\]

\begin{lemma}\label{lem:cosk_sk_composition}
  The counit is a natural isomorphism
  \(\id \simeq \iota_{n}^{*}(\iota_{n})_{!}\) and the unit is a
  natural isomorphism
  \(\iota_{n}^{*}(\iota_n)_{*}\simeq\id\). Consequently, there are
  induced natural isomorphisms \(\cosk_{n}\sk_{n}\simeq \cosk_{n}\)
  and \(\sk_n\cosk_n\simeq\sk_n\).
\end{lemma}
\begin{proof}
  By \cite[{Exposé}~i, Proposition~5.6]{SGA4-1} the assertion that
  \(\id\simeq\iota_n^{*}(\iota_n)_{!}\) and
  \(\iota_{n}^{*}(\iota_n)_{*}\simeq\id\) is equivalent to
  \(\iota_{n}\) being a fully faithful functor. But this is immediate
  from the definitions.

  For the second part, observe that
\[
  \cosk_n\sk_n = (\iota_n)_{*}\iota_n^{*}(\iota_{n})_{!}\iota_n^{*}
  \simeq (\iota_n)_{*}\iota_n^{*} = \cosk_{n}
\]
and
\[
  \sk_n\cosk_n =
  (\iota_n)_{!}\iota_n^{*}(\iota_n)_{*}\iota_n^{*}\simeq
  (\iota_n)_{!}\iota_n^{*}\simeq \sk_n.\qedhere
\]
\end{proof}

We will abuse notation somewhat and simply call the composition
\(\id\to\cosk_{n}\sk_{n}\simeq\cosk_{n}\) the \emph{unit
  transformation} and the composition
\(\sk_{n}\simeq\sk_n\cosk_n\to\id\) the \emph{counit transformation}.

\begin{remark}\label{rem:unit-is-unit}
  In fact, the unit transformation
  \(\eta\colon \id\to\cosk_n=(\iota_n)_{*}\iota_n^{*}\) is the unit of
  the adjunction \(\iota_n^{*}\dashv (\iota_n)_{*}\): Writing
  \(\iota=\iota_n\), the isomorphism
  \[
    \hom(\iota_{!}\iota^{*}(X), \iota_{!}\iota^{*}(X)) \to \hom(X,
    \iota_{*}\iota^{*}\iota_{!}\iota^{*}(X))
  \]
  sends the identity map to
  \[
    \iota_{*}\Big(\iota^{*}({\id})\circ
    \unit^{\iota_{!}\dashv\iota^{*}}_{\iota^{*}(X)}\Big)\circ\unit_X^{\iota^{*}\dashv\iota_{*}}.
  \]
  Since the isomorphism
  \(\iota_{*}\iota^{*}(X)\to\iota_{*}\iota^{*}\iota_{!}\iota^{*}(X)\)
  is given by
  \(\iota_{*}(\unit^{\iota_{!}\dashv\iota^{*}}_{\iota^{*}(X)})\), it
  follows that the composite
  \[
    \eta_{X}\colon X \to \cosk_n\sk_n(X)\isom\cosk_n(X)
  \]
  is precisely \(\unit_X^{\iota^{*}\dashv\iota_{*}}\).

Dually, the counit transformation \((\iota_n)_{!}\iota_{n}^{*} = \sk_n
\to \id\) is the counit of the adjunction \((\iota_{n})_{!}\dashv\iota_{n}^{*}\).
\end{remark}

\begin{lemma}\label{lem:sk-comp}
  If \(n\leq i\), then there are natural isomorphisms
  \(\sk_n\sk_i\simeq \sk_n \simeq \sk_i\sk_n\).
\end{lemma}
\begin{proof}
We have a commutative diagram of functors
\[
  \begin{tikzcd}[column sep=1em]
    {} & \simplex_{\leq i} \arrow[rd, "\iota_i"] & {} \\
    \simplex_{\leq n} \arrow[ru, "\iota_n^i"] \arrow[rr, "\iota_n"'] & & \simplex
  \end{tikzcd}
\]
which induces commutative diagrams
\[
  \begin{tikzcd}[column sep=1em]
    {} & \sset_{\leq i} \arrow[dl, "(\iota_n^i)^{*}"'] & {} \\
    \sset_{\leq n} & & \sset \arrow[ul, "\iota_i^{*}"'] \arrow[ll, "\iota_n^{*}"]
  \end{tikzcd}\quad\text{and}\quad
  \begin{tikzcd}[column sep=1em]
    {} & \sset_{\leq i} \arrow[dr, "(\iota_i)_{!}"] & {} \\
    \sset_{\leq n} \arrow[ru, "(\iota_n^i)_{!}"] \arrow[rr, "(\iota_n)_{!}"'] & & \sset.
  \end{tikzcd}
\]
By \autoref{lem:cosk_sk_composition} we find
\begin{align*}
  \sk_n\sk_i &= (\iota_n)_{!}\iota_n^{*}(\iota_i)_{!}\iota_i^{*} \simeq
               (\iota_n)_{!}(\iota_n^i)^{*}\iota_i^{*}(\iota_i)_{!}\iota_i^{*} \simeq
  \\
             &\simeq (\iota_n)_{!}(\iota_{n}^i)^{*}\iota_i^{*}\simeq
               (\iota_n)_{!}\iota_n^{*} = \sk_{n} \\
  \shortintertext{and}
  \sk_i\sk_n &= (\iota_i)_{!}\iota_i^{*}(\iota_n)_{!}\iota_n^{*}
               \simeq
               (\iota_i)_{!}\iota_i^{*}(\iota_i)_{!}(\iota_n^i)_{!}\iota_n^{*}
               \simeq \\
             &\simeq (\iota_i)_{!}(\iota_n^i)_{!}\iota_n^{*} \simeq
               (\iota_n)_{!}\iota_n^{*} = \sk_n.\qedhere
\end{align*}
\end{proof}

\begin{proposition}\label{prop:cosk-is-truncated}
  If \(X\in\sset\) is a Kan complex, then  \(\cosk_n X\) is an
  \((n-1)\)--truncated Kan complex.
\end{proposition}
\begin{proof}
To show that \(\cosk_n X\) is a Kan complex, we need to show that
any horn \(\Lambda^k_i\to\cosk_n X\) extends to a simplex
\(\Delta^k\to\cosk_n X\) in \(\cosk_n X\). By adjunction, this is
equivalent to showing that in any diagram
\[
  \begin{tikzcd}
    \sk_n \Lambda^k_i \arrow[r, "h"] \arrow[d, into] & X \\
    \sk_n \Delta^k \arrow[ur, dashed]
  \end{tikzcd}
\]
a dashed arrow making the diagram commute exists. Now, if \(n<k-1\),
then the horn inclusion \(\Lambda^k_i\into \Delta^k\) induces an
isomorphism on \(\sk_n\), so the required extension exists trivially.

If \(n \geq k-1\), then the counit is an isomorphism
\(\sk_{k-1}\Lambda^k_i\isom \Lambda^k_i\) and by fibrancy of \(X\)
there is an extension of \(h\) to a simplex \(\Delta^{k}\to
X\). Naturality of the counit transformation yields a commutative
square
\[
  \begin{tikzcd}
    \sk_n\Lambda^k_i \arrow[r, "{\isom}"] \arrow[d] & \Lambda^k_i
    \arrow[d, into] \\
    \sk_n\Delta^k \arrow[r] & \Delta^k
  \end{tikzcd}
\]
which implies that we can take the composite
\(\sk_n\Delta^k\to\Delta^k\to X\) as the required extension.

To show that \(\cosk_n X\) is \((n-1)\)--truncated, let \(i\geq n\), choose
some base point \(x\in (\cosk_n X)_{0}\) and let
\([\alpha]\in\pi_i(\cosk_nX, x)\) be some homotopy class. Because
\(\sk_{i}\Delta^{i+1}\) is a model for the \(i\)--sphere, we can take
\(\alpha\) to be a map \(\sk_i\Delta^{i+1}\to\cosk_n X\). To prove
that \([\alpha]=*\in\pi_i(\cosk_{n}X, x)\), it will then be enough to
show that in
\[
  \begin{tikzcd}
    \sk_i\Delta^{i+1} \arrow[r, "\alpha"] \arrow[d] & \cosk_nX \\
    \Delta^{i+1} \arrow[ru, dashed]
  \end{tikzcd}
\]
a dashed map making the diagram commute exists. By adjunction this is
equivalent to showing that a dashed map in
\[
  \begin{tikzcd}
    \sk_n\sk_i\Delta^{i+1} \arrow[r] \arrow[d] & X \\
    \sk_n\Delta^{i+1} \arrow[ru, dashed]
  \end{tikzcd}
\]
exists. But by \autoref{lem:sk-comp} there is a natural isomorphism
\(\sk_n\sk_i\Delta^{i+1}\isom \sk_n\Delta^{i+1}\), which implies that
such an extension always exists.
\end{proof}

\begin{definition}
  A simplicial set \(X\) is called \(n\)--skeletal if \(X\isom \sk_n
  X\). Equivalently, by \autoref{lem:sk-comp}, \(X\) is
  \(n\)--skeletal if and only if it lies in the essential image of \(\sk_{n}\).
\end{definition}

Note that, by \autoref{lem:sk-comp}, an \(n\)--skeletal simplicial set
is automatically \(i\)--skeletal for any \(i\leq n\). Also, since
\(\sk_{n}\) is a left adjoint, the property of being \(n\)--skeletal
is preserved under arbitrary colimits.

\begin{lemma}\label{lem:skeletal-simp-sets}
  Let \(X\) be any simplicial set and \(n\geq 0\).
  \begin{enumerate}
  \item If \(K\) is an \(n\)--skeletal simplicial set, then
    \(K\times\Delta^1\) is \((n+1)\)--skeletal.
  \item The functors \(\hom(\_,X)\) and \(\hom(\_, \cosk_nX)\) agree
    on the full subcategory of \(\sset\) consisting of \(n\)--skeletal
    simplicial sets, that is, composition with \(\eta_X\) is a natural
    isomorphism
    \[
      (\eta_X)_{*}\colon\hom(K,X)\to\hom(K,\cosk_nX)
    \]
    for \(n\)--skeletal \(K\).
  \item If \(L\) is an \((n-1)\)--skeletal simplicial set, \(X\) is a
    Kan complex and \(\alpha,\beta\colon L\to X\) are homotopic after
    composing with \(\eta_X\colon X\to\cosk_n X\),
    \ie~\(\eta_X\circ\alpha\simeq\eta_X\circ\beta\), then
    \(\alpha\simeq\beta\).
  \end{enumerate}
\end{lemma}
\begin{proof}
  Suppose \(X\) is some simplicial set, \(K\) is \(n\)--skeletal
  and \(L\) is \((n-1)\)--skeletal for some \(n\).
  \begin{enumerate}
  \item Since being \(n\)--skeletal is preserved under colimits and
    every simplicial set is a colimit of standard simplices, we need
    only consider the case \(K = \Delta^i\). \viktor{triangulate
      \(\Delta^i\times\Delta^1\)}
  \item Because \(K\) is assumed to be \(n\)--skeletal, the counit
    \(\varepsilon\colon \sk_nK \to K\) is an isomorphism. It follows
    that we have an isomorphism
    \[
      \psi\colon \hom(K,X)\to[\varepsilon^{*}]\hom(\sk_nK, X)\to\hom(K,\cosk_nX).
    \]
    It remains to check that \(\psi = (\eta_X)_{*}\). Take
    \(\gamma\colon K\to X\). Then, writing \(\iota = \iota_n\), we
    find as in \autoref{rem:unit-is-unit} and using the triangle
    identity
    \(\iota^{*}(\counit^{\iota_{!}\dashv\iota^{*}}_K) \circ
    \unit^{\iota_{!}\dashv\iota^{*}}_{\iota^{*}(K)} = {\id}\), that
    \begin{align*}
      \psi(\gamma) &=
                     \iota_{*}\Big(\iota^{*}(\gamma\circ\varepsilon)\circ\unit^{\iota_{!}\dashv\iota^{*}}_{\iota^{*}(K)}\Big)\circ
                     \eta_{K} =\\
                   &=
                     \cosk_n(\gamma)\circ\iota_{*}(\iota^{*}\counit^{\iota_{!}\dashv\iota^{*}}_K)\circ\iota_{*}(\unit^{\iota_{!}\dashv\iota^{*}}_{\iota^{*}(K)})\circ\eta_{K}
                     =\\
                   &= \cosk_n(\gamma)\circ\eta_K =\\
                   &= \eta_{X}\circ\gamma.
    \end{align*}
    The last equation follows from the naturality of \(\eta\).
  \item Since homotopy of maps \(L\to X\) is determined by maps
    \(L\times\Delta^1\to X\), this follows directly by combining (i)
    and (ii).\qedhere
  \end{enumerate}
\viktor{write proof}
\end{proof}


\begin{proposition}\label{prop:cosk-unit-is-connected}
The unit map \(\eta\colon X\to \cosk_n X\) is an \((n-1)\)--equivalence.
\end{proposition}
\begin{proof}
  By \autoref{prop:cosk-is-truncated} we can assume without loss of
  generality that both \(X\) and \(\cosk_n X\) are Kan complexes. For
  each \(i\leq n-1\) and \(x\in X_{0} = (\cosk_n X)_0\) we will
  construct an inverse map
  \(\varphi\colon \pi_{i}(\cosk_n X, x)\to \pi_i(X,x)\) to
  \(\eta_{*}\). Because of \(\pi_{n}(\cosk_n X, x) = 0\) and
  \autoref{lem:connected-homotopy-grps}, this will be enough to
  establish the proposition.

  By \autoref{lem:skeletal-simp-sets}, the unit map \(\eta\colon
  X\to\cosk_n X\) induces an isomorphism
  \[
    \eta_{*}^{-1}\colon\hom(\sk_i\Delta^{i+1},\cosk_n
    X)\to[{\isom}]\hom(\sk_i\Delta^{i+1}, X)
  \]
  which preserves pointed maps. Composing with the map
  \(\hom_{*}(\sk_i\Delta^{i+1},X)\to\pi_i(X,x)\) which takes pointed
  homotopy classes, we obtain a map
  \[
    \overline\varphi\colon\hom_{*}(\sk_i\Delta^{i+1},\cosk_nX)\to\pi_{i}(X,x).
  \]
  Again, by \autoref{lem:skeletal-simp-sets} this map is compatible
  with pointed homotopy and therefore descends to a map
  \(\varphi\colon \pi_i(\cosk_nX, x)\to\pi_{i}(X,x)\).

  We compute:
  \begin{align*}
    \varphi(\eta_{*}([\alpha])) &= \varphi([\eta\circ\alpha]) =
                                  [\eta_{*}^{-1}(\eta\circ\alpha)] =
                                  [\alpha] \\
    \shortintertext{and}
    \eta_{*}(\varphi([\beta])) &= \eta_{*}([\eta_{*}^{-1}(\beta)] =
                                 [\eta\circ\eta_{*}^{-1}(\beta)] = [\beta].\qedhere
  \end{align*}
\end{proof}

\begin{corollary}\label{cor:cosk-is-truncation}
  The functor \(\cosk_n\) together with the unit transformation
  \(\id\to \cosk_{n}\) is an \Th{(n-1)} truncation functor.\qed
\end{corollary}

% \begin{definition}\label{defn:rel-trunc-functor}
%   Let \(f\colon X\to Y\) be some map of simplicial sets and let
%   \((\trunc{n},\eta)\) be an \Th{n} truncation functor in the sense of
%   \autoref{defn:trunc_functor}. The associated \emph{relative \Th{n}
%     truncation} of \(f\) is defined as follows. Write \(Y\) as a
%   homotopy colimit of contractible simplicial sets,~e.\,g.
%   \[
%     Y \simeq \hocolim_{i\in I} \{i\}
%   \]
%   and observe that \(f\) is weakly equivalent to the map
%   \[
%     \hocolim_{i\in I} \hofib_i(f) \to \hocolim_{i\in I} \{i\}.
%   \]
%   Then we set
%   \[
% \trunc{n}(f) = \trunc{n}^{Y}(X) = \hocolim_{i\in I} \trunc{n}\hofib_i(f).
%   \]
% \end{definition}

% % \begin{example}
% %   Using \autoref{cor:cosk-is-truncation}, our usual example of a
% %   relative truncation in the sense of \autoref{defn:rel-trunc-functor}
% %   will be the \emph{relative coskeleton}
% %   \[
% %     \cosk_n^Y(X) = Y\times^h_{\cosk_n Y}\cosk_nX.
% %   \]
% % \end{example}

% We can formally eliminate the dependence of homotopy groups on a chosen
% base point by taking a relative point of view. Any simplicial set \(X\)
% acquires a \emph{canonical} base point when pulled back to itself. That
% is, the diagonal \(X\to X\times X\) should be regarded as a base point
% of \(X\times X\) considered as a space parameterized by \(X\). As
% usual we can now consider homotopy classes of maps from spheres to
% \(X\times X\) over \(X\).

% \begin{definition}\label{defn:homotopy-sheaf}
%   Let \(X\) be any simplicial set. Let \(S^{n}\) be some simplicial
%   model of the \(n\)--sphere and consider the function complex
%   \(X^{S^n}\). It naturally is a space over \(X\) via the map
%   \(\ev\colon X^{S^n}\to X\) induced by evaluation at the canonical base point of
%   \(S^n\). Let \(\trunc{0}^X\) be a relative \Th{0} truncation functor.
%   Then the \emph{\Th{n} homotopy sheaf} of \(X\) is defined as
%   \[
%     \pi_nX = \trunc{0}^{X}(X^{S^n}).
%   \]
%   This is a priori a simplicial set equipped with a map \(\pi_n X\to X\) whose
%   homotopy fibers are \(0\)-truncated.
% \end{definition}

% \begin{proposition}
%   Let \(X\) be some simplicial set and \(x\in X_{0}\). Then the
%   homotopy fiber of \(\pi_nX\) over \(x\) is isomorphic to the usual
%   homotopy group \(\pi_n(X,x)\).
% \end{proposition}
% \begin{proof}
% \viktor{write new proof}
% \end{proof}

% \begin{proposition}
%   Given any map \(f\colon X\to Y\), we have a long exact sequence of homotopy sheaves:
% \end{proposition}

% \viktor{Prove classical homotopy group statements: relative truncation
%   functors; long exact sequence; base point free definition}

\section{Truncated and Connected Morphisms}
Most of the material in this section is due to \cite{mr2522659} and
\cite{rezkhomotopytoposes}. For the benefit of the reader\footnote{and
  for our own benefit} we try to elaborate on results whose proofs are
only sketched in these references.

\begin{definition}\label{defn:truncated_object}
  Let \(\mathbf{M}\) be a combinatorial simplicial model category. An
  object \(X\in\mathbf{M}\) is called \emph{\(n\)--truncated} (\(n\geq
  -1\)) if for all objects \(Y\in\mathbf{M}\) the derived mapping
  space \(\RHom(Y,X)\) is an \(n\)--truncated simplicial set. A
  morphism \(f\colon Y\to X\) in \(\mathbf{M}\) is called
  \emph{\(n\)--truncated} if for all objects \(Z\in\mathbf{M}\) the
  induced morphism \(f_{*}\colon \RHom(Z,Y)\to\RHom(Z,X)\) is
  \(n\)--truncated.
\end{definition}

\begin{remark}
  An object \(X\in\mathbf M\) is \(n\)--truncated if and only if the
  morphism \(X\to *\) is \(n\)--truncated.
\end{remark}

As a matter of convention, an object \(X\) will be called
\((-2)\)--truncated if it is contractible and a morphism \(f\colon
Y\to X\) will be called \((-2)\)--truncated if it is a weak
equivalence.

\begin{corollary}\label{cor:general-diagonal-truncated}
  In any combinatorial simplicial model category, a morphism \(f\colon
  Y\to X\) is \(n\)--truncated if and only if the diagonal
  \(\Delta_{f}\colon Y\to Y\times^{h}_{X} Y\) is
  \((n-1)\)--truncated.
\end{corollary}
\begin{proof}
  This follows immediately from \autoref{defn:truncated_object} and
  \autoref{lem:relative-truncated-diagonal}.
\end{proof}

\begin{definition}
  Let \(\mathbf{M}\) be a combinatorial simplicial model
  category. Then \(\mathbf{M}|_{{\leq}n}\) will denote the full
  subcategory on \(n\)--truncated objects of \(\mathbf{M}\).
\end{definition}

Recall that a \emph{relative category} is a category \(\mathbf{M}\)
together with a subcategory \(W\subseteq \mathbf{M}\) containing all
objects of \(\mathbf{M}\). For instance, every model category with the
subcategory of weak equivalences is a relative category. A
\emph{relative functor} \(F\colon (\mathbf{M},W) \to (\mathbf{N},W')\)
is a functor \(\mathbf{M}\to\mathbf{N}\) such that \(F(W)\subset
W'\). A relative functor between model categories is sometimes also
called a \emph{homotopical functor}.

\begin{remark}\label{rem:holim-homotopical}
  Let \(I\) be some category and let \(\mathbf{M}^{I}\) be the
  category of \(I\)--shaped diagrams in \(\mathbf{M}\). In
  \(\mathbf{M}^{I}\) we take the weak equivalences to be those natural
  transformations that induce weak equivalences in \(\mathbf{M}\) on
  every object \(i\in I\). The Bousfield--Kan construction of the
  homotopy limit yields a functor
\[
\holim\colon \mathbf{M}^I \to \mathbf{M}
\]
  In fact, this functor is homotopical by the weak homotopy invariance
  of the homotopy limit.
\end{remark}

\begin{proposition}\label{prop:truncated-objects-exact-functors}
  Let \(F\colon \mathbf{M}\to\mathbf{N}\) be a homotopical functor
  between combinatorial simplicial model categories that preserves
  homotopy pullbacks; that is, the image under \(F\) of any homotopy
  pullback square in \(\mathbf M\) is a homotopy pullback square in
  \(\mathbf N\).

  Then \(F\) preserves \(n\)--truncated morphisms for any \(n\) and
  consequently restricts to a functor
  \(F\colon \mathbf M|_{\leq n}\to\mathbf N|_{\leq n}\).
\end{proposition}
\begin{proof}
  Since \(F\) is homotopical, by definition it preserves
  \((-2)\)--truncated morphisms. Let \(n > -2\) and suppose by
  induction that \(F\) preserves \((n-1)\)--truncated morphisms. Let
  \(f\colon Y\to X\) be \(n\)--truncated in \(\mathbf M\). By
  \autoref{cor:general-diagonal-truncated} the diagonal
  \(\Delta_{f}\colon Y\to Y\times^{h}_{X} Y\) is \((n-1)\)--truncated
  and by induction \(F(\Delta_{f})\) is \((n-1)\)--truncated. Since
  \(F\) preserves homotopy pullbacks \(F(\Delta_{f})\) is weakly
  equivalent to \(\Delta_{F(f)}\). Again by
  \autoref{cor:general-diagonal-truncated} we conclude that \(F(f)\)
  is \(n\)--truncated.
\end{proof}

\begin{corollary}\label{cor:truncated-objects-limits}
  The full subcategory \(\mathbf{M}|_{{\leq} n}\) is stable under
  homotopy limits.
\end{corollary}
\begin{proof}
  Forming homotopy limits is an example of a homotopical functor, see~\autoref{rem:holim-homotopical}, which preserves homotopy pullbacks.
\end{proof}

\begin{theorem}\label{thm:truncated-model-structure-exists}
  Let \(\mathbf{M}\) be a combinatorial simplicial model category and
  \(n\geq -1\). There is a combinatorial simplicial model structure on
  \(\mathbf{M}\) whose fibrant objects are exactly the
  \(n\)--truncated fibrant objects of \(\mathbf{M}\). The resulting
  model category will be denoted by \(\mathbf{M}_{\leq n}\).
\end{theorem}
\begin{proof}
  By \cite[Prop.~4.7]{mr1870516} there is a set \(A\) of objects of
  \(\mathbf{M}\) such that every \(X\in\mathbf{M}\) is canonically
  weakly equivalent to a homotopy colimit of objects in \(A\). Define
  a set of morphisms
  \[
  T \coloneqq \{S^{i}\times a \to D^{i+1}\times a : a\in A, i > n \}
  \]
  in \(\mathbf{M}\). Recall that an object \(X\in\mathbf{M}\) is
  called \(T\)--local if for every \(f\colon S^{i}\times a\to
  D^{i+1}\times a\) in \(T\) the induced map
  \[
  f^{*}\colon \RHom(D^{i+1}\times a, X)\to\RHom(S^{i}\times a, X)
  \]
  is a weak equivalence of simplicial sets. We claim that the
  \(T\)--local objects of \(\mathbf{M}\) are precisely the
  \(k\)--truncated objects. To see this, assume first that \(X\) is
  \(T\)--local and let \(Y\in\mathbf{M}\) be any object and let
  \(\{a_{j}\}\colon I\to\mathbf{M}\) be a diagram of objects
  \(a_{j}\in A\) such that \(Y\simeq \hocolim_{j\in I} a_{j}\). Then,
  for \(i>n\), we have
  \begin{align*}
    \RHom(Y, X^{S^{i}}) &\simeq \RHom(\hocolim_{j\in I}a_{j}, X^{S^{i}})\simeq \holim_{j\in I}\RHom(a_{j}, X^{S^{i}}) \simeq \\
                        &\simeq \holim_{j\in I} \RHom(S^{i}\times a_{j}, X) \simeq \holim_{j\in I}\RHom(D^{i+1}\times a_{j}, X)\simeq \\
                        &\simeq \holim_{j\in I}\RHom(a_{j}, X^{D^{i+1}})\simeq \RHom(Y, X^{D^{i+1}}).
  \end{align*}
  Consequently we find
  \begin{align*}
    \RHom(S^{i}, \RHom(Y, X)) & \simeq \RHom(Y, X^{S^{i}}) \simeq \RHom(Y, X^{D^{i+1}}) \simeq\\
                              &\simeq \RHom(D^{i+1}, \RHom(Y, X)).
  \end{align*}
  Hence, for any \(f\in\RHom(Y,X)_{0}\) we have
  \begin{align*}
    \pi_{i}(\RHom(Y, X), f) &\cong \pi_{0}\RHom_{*}(S^{i}, (\RHom(Y,X), f)) \cong \\
                            &\cong \pi_{0}(\RHom(S^{i}, \RHom(Y,X))\times^{h}_{\RHom(Y,X)}\{f\}) \cong \\
                            &\cong \pi_{0}(\RHom(D^{i+1}, \RHom(Y,X))\times^{h}_{\RHom(Y,X)}\{f\}) \cong \\
                            &\cong \pi_{0}\RHom_{*}(D^{i+1}, (\RHom(Y,X), f)) \cong \\
                            &\cong \pi_{0}\RHom_{*}(*, (\RHom(Y,X), f)) \cong \pi_{0}(*) = *.
  \end{align*}
  It follows that \(X\) is \(n\)--truncated.

  Conversely, assume \(X\) is \(n\)--truncated. This means that for
  any \(Y\in\mathbf{M}\) and any \(i>n\) the restriction map
  \[
  \RHom(D^{i+1}, \RHom(Y,X)) \to \RHom(S^{i}, \RHom(Y,X))
  \]
  is a weak equivalence. Hence, for every \(a\in A\) we find
  \begin{align*}
    \RHom(S^{i}\times a, X) &\simeq \RHom(S^{i}, \RHom(a, X))\simeq \\
    &\simeq \RHom(D^{i+1}, \RHom(a, X))\simeq \RHom(D^{i+1}\times a, X).
  \end{align*}
  It follows that \(X\) is \(T\)--local.

  Since \(T\) is a set of morphisms and \(\mathbf{M}\) is a
  combinatorial simplicial model category, the left Bousfield
  localization \(\mathbf{M}_{\leq k} \coloneqq L_{T}\mathbf{M}\) of
  \(\mathbf{M}\) at \(T\) exists and is itself a combinatorial
  simplicial model category, see
  \cite[Prop.~A.3.7.3]{mr2522659}. Furthermore, the same theorem also
  shows that the fibrant objects of \(\mathbf{M}_{\leq k}\) are
  precisely the fibrant \(T\)--local objects. But, by our previous
  calculations, these are exactly the \(n\)--truncated fibrant objects
  of \(\mathbf{M}\).
\end{proof}

\begin{corollary}\label{cor:weak-equiv-level}
  Let \(n\geq -2\) and let \(S\) be the collection of all morphisms \(f\colon
  X\to Y\) satisfying the following condition: For all \(n\)--truncated objects
  \(Z\in\mathbf M\) the induced map
  \[f^{*}\colon \RHom_{\mathbf M}(Y, Z) \to \RHom_{\mathbf M}(X, Z)\] is a weak
  equivalence of simplicial sets.

  Then the model category \(\mathbf M_{\leq n}\) is the left Bousfield
  localization of \(\mathbf M\) with respect to \(S\).
\end{corollary}
\begin{proof}
  It will be enough to show that the weak equivalences in \(\mathbf
  M_{\leq n}\) are precisely the morphisms in \(S\). To that end, let
  \(f\colon X\to Y\) be a morphism in \(\mathbf M\) and \(Z\in\mathbf
  M|_{\leq n}\). Let \(Z^{\fib}\) be a fibrant replacement of \(Z\) in
  \(\mathbf M\) and we can assume without loss of generality that
  \(X\) and \(Y\) are cofibrant. Because \(Z^{\fib}\) is
  \(n\)--truncated and fibrant in \(\mathbf M\), by
  \autoref{thm:truncated-model-structure-exists} it is also fibrant in
  \(\mathbf M_{\leq n}\). We obtain a commutative diagram
  \[
  \begin{tikzcd}
    \RHom_{\mathbf M}(Y, Z) \arrow[r, "f^{*}"] \arrow[d] & \RHom_{\mathbf M}(X, Z) \arrow[d] \\
    \Hom_{\mathbf M}(Y, Z^{\fib}) \arrow[r, "f^{*}"] & \Hom_{\mathbf M}(X, Z^{\fib}) \\
    \RHom_{\mathbf M_{\leq k}}(Y, Z) \arrow[r, "f^{*}"] \arrow[u] & \RHom_{\mathbf M_{\leq k}}(X, Z). \arrow[u]
  \end{tikzcd}
  \]
  in which all vertical maps are weak equivalences of simplicial
  sets. Hence, \(f\) is a weak equivalence in \(\mathbf M_{\leq n}\)
  if and only if for all \(Z\) the bottom map is a weak equivalence if
  and only if for all \(Z\) the top map is a weak equivalence if and
  only if \(f\in S\).
\end{proof}

\begin{remark}
  The model category \(\mathbf M_{\leq 0}\) is discrete in the
  following sense. Consider the full simplicial subcategory \((\mathbf
  M_{\leq 0})^{cf}\subset \mathbf M_{\leq 0}\) on the
  cofibrant--fibrant objects. Then a morphism \(f\colon X\to Y\) in
  \((\mathbf M_{\leq 0})^{cf}\) is a weak equivalence if and only if
  it is an isomorphism in \((\mathbf M_{\leq 0})^{cf}\). This follows
  from the fact that \(\pi_{0}(S) \isom S_{0}\) for \(0\)--truncated
  simplicial sets \(S\). In particular, the homotopy category of
  \(\mathbf M_{\leq 0}\) is equivalent to the category \((\mathbf
  M_{\leq 0})^{cf}\) and we will denote it by \(\disc(\mathbf M)\).

  As a matter of terminology, given an object \(X\in\mathbf M\),
  homotopy types in \(\disc(\mathbf M/X)\) will be called
  \emph{sheaves on \(X\)}.
\end{remark}

We can immediately adapt \autoref{defn:trunc_functor} to this more
general setting:

\begin{definition}\label{defn:gen-trunc-functor}
  A functor \(\trunc{n}\colon \mathbf M \to \mathbf M\) with a natural
  transformation \(\eta\colon \id\to\trunc{n}\) is an \emph{\Th{n}
    truncation functor} for \(\mathbf M\) if
  \begin{itemize}
  \item \(\trunc{n}X\) is \(n\)--truncated for all \(X\in\mathbf M\).
  \item the map \(\eta_X\colon X\to\trunc{n}X\) is an equivalence in \(\mathbf
    M_{\leq n}\)
  \end{itemize}
\end{definition}

By functorial factorizations,
\autoref{thm:truncated-model-structure-exists} implies, for every
\(n\geq -2\), the existence of fibrant replacement functors
\[
\trunc{n}\colon \mathbf{M}\to\mathbf{M}|_{\leq n}
\]
for \(\mathbf M_{\leq n}\). In particular, given any object \(X\in\mathbf{M}\) we
get maps
\[
X\to \trunc{n} X\to *,
\]
the first one being an acyclic cofibration in \(\mathbf{M}_{\leq n}\)
and the second one being a fibration in \(\mathbf{M}_{\leq
  n}\). \Autoref{cor:weak-equiv-level} implies that there are natural
weak equivalences
\[
\RHom_{\mathbf M_{\leq n}}(\trunc{n} X, Y)\simeq \RHom_{\mathbf
  M}(\trunc{n} X, Y) \simeq \RHom_{\mathbf M}(X, Y)
\]
whenever \(Y\) is \(n\)--truncated. Concretely, every morphism
\(f\colon X\to Y\) factors up to weak equivalence as morphisms \(X\to
\trunc{n}X\to Y\) if \(Y\) is \(n\)--truncated.

\begin{corollary}\label{cir:trunc-is-trunc}
  The functors \(\trunc{n}\) as defined above together with
  the natural maps \(X\to\trunc{n}X\) are \Th{n} truncation functors
  in the sense of \autoref{defn:gen-trunc-functor}.\qed
\end{corollary}

\begin{corollary}
  Given \(n \leq m\), for any \(X\in\mathbf M\) there is a natural
  weak equivalence \(\trunc{n}\trunc{m} X \simeq \trunc{n} X\) in
  \(\mathbf M\). In particular, \(\trunc{n}X\) is weakly equivalent to
  the \Th{n} truncation of \(\trunc{m}X\) for every
  \(m\geq n\).
\end{corollary}
\begin{proof}
  Observe that \(n\leq m\) implies that \(X \simeq_{\leq
    n}\trunc{m}X\), since \(\mathbf M|_{\leq n}\subset \mathbf
  M|_{\leq m}\) and \(X\simeq_{\leq m}\trunc{m}X\). Hence, given any
  \(Y\in\mathbf M\), we find
  \begin{align*}
    \RHom_{\mathbf M}(Y, \trunc{n}\trunc{m} X)&\simeq \RHom_{\mathbf M}(\trunc{n}Y, \trunc{n}\trunc{m}X)\simeq \RHom_{\mathbf M_{\leq n}}(Y, \trunc{m}X)\simeq \\
    &\simeq \RHom_{\mathbf M_{\leq n}}(Y, X) \simeq \RHom_{\mathbf M}(\trunc{n}Y, \trunc{n}X)\simeq \RHom_{\mathbf M}(Y, \trunc{n}X).
  \end{align*}
  It follows that \(\trunc{n}\trunc{m}X\simeq \trunc{n}X\).
\end{proof}

For \(X\in\mathbf{M}\) a fixed object, the slice category \(\mathbf
M/X\) is again a combinatorial simplicial model category. Hence, by
the above, it has truncation functors which we will denote by
\(\trunc{n}^{X}\). Observe that an object \(f\colon Y\to X\) in
\(\mathbf M/X\) is \(n\)--truncated if and only if \(f\) is a
\(n\)--truncated morphism in \(\mathbf M\). Indeed, for any \(g\colon
Z\to X\) we have a weak equivalence
\[
\RHom_{\mathbf M/X}(g, f)\simeq \RHom_{\mathbf M}(Y, X)\times^{h}_{\RHom_{\mathbf M}(Z, X)} \{g\}.
\]

\begin{proposition}\label{prop:left-exact-preserves-trunc}
  Let \(\mathbf M\) and \(\mathbf N\) be combinatorial simplicial
  model categories and let
  \[
  \begin{tikzcd}
    \mathbf M \arrow[r, shift right=.7ex, "G"'] & \arrow[l, shift right=.7ex, "F"'] \mathbf N
  \end{tikzcd}
  \]
  be a simplicial Quillen adjunction. Assume that the derived left adjoint \(\LL F\) preserves finite homotopy limits. Then there is a natural weak equivalence
  \[\trunc{n}^{\mathbf M} \LL F(X) \simeq \LL F(\trunc{n}^{\mathbf N} X)\]
  for every \(X\in\mathbf N\).
\end{proposition}
\begin{proof}
  By \autoref{prop:truncated-objects-exact-functors} \(\LL F\) sends
  \(n\)--truncated objects in \(\mathbf N\) to \(n\)--truncated objects in
  \(\mathbf M\). Hence, the canonical morphism \(\LL F(X)\to\LL
  F(\trunc{n}^{\mathbf N}X)\) factors up to weak equivalence through a morphism
  \(f\colon \trunc{n}^{\mathbf M}\LL F(X)\to \LL F(\trunc{n}^{\mathbf N}X)\). To
  show that this is a weak equivalence, let \(Y\in\mathbf M\) be
  \(n\)--truncated. Then the induced morphism \(f^{*}\) factors through weak
  equivalences
  \begin{align*}
    \RHom_{\mathbf M}(\LL F(\trunc{n}^{\mathbf N}X), Y)&\simeq \RHom_{\mathbf N}(\trunc{n}^{\mathbf N}X, \RR G(Y)) \simeq\\
                                                       &\simeq \RHom_{\mathbf N}(X, \RR G(Y)) \simeq \\
                                                       &\simeq \RHom_{\mathbf M}(\LL F(X), Y) \simeq \\
                                                       &\simeq \RHom_{\mathbf M}(\trunc{n}^{\mathbf M}\LL F(X), Y).
  \end{align*}
  Hence, \(f\) is a weak equivalence in \(\mathbf M_{\leq n}\). But since \(f\)
  is a morphism between \(n\)--truncated objects, this is enough to show that
  \(f\) is a weak equivalence in \(\mathbf M\).
\end{proof}

\begin{definition}
  Let \(n\geq -2\). An object \(X\in\mathbf M\) is \emph{\(n\)--connected} if
  \(\trunc{n}(X)\simeq *\). A morphism \(X\to Y\) is \emph{\(n\)--connected} if
  it is \(n\)--connected as an object of \(\mathbf M/Y\), that is if it induces
  an equivalence \(\trunc{n}^Y(X)\to Y\).
\end{definition}

Observe that every object is \((-2)\)--connected. A \((-1)\)--connected
morphism is also called an \emph{effective epimorphism}.

\section{Homotopy Sheaves}

Given a space \(X\) in classical homotopy theory one can always choose
a base point \(x\in X\) and define homotopy groups \(\pi_{n}(X,x) =
[S^{n}, (X,x)]_{*} = \pi_{0}\RHom_{*}(S^{n}, (X,x))\). For \(n\geq 1\)
the group structure comes from the usual (homotopy) cogroup structure
on \(S^{n}\): the multiplication is induced by precomposition with the
\enquote{pinch map} \(S^{n}\to S^{n}\vee S^{n}\).

The main difficulty in working with homotopy groups in more general
homotopy theories is that for various purposes restricting one's
attention to pointed spaces is not good enough. This phenomenon is
entirely analogous to the observation that a sheaf of sets on a
topological space need not have any global section. For example, the
sheaf of local sections of a torsor on a topological space has a
global section if and only if the torsor is trivial. One could now
imagine working with a more general notion of base point for objects in
an arbitrary model category; for example, for simplicial sheaves there
certainly exist sections over small enough open sets. But doing so
amounts to choosing a presentation of a combinatorial model category
in the sense of \cite{mr1870516}.

In light of these considerations we will attempt to treat all possible
base points at the same time. Let us first spell out the case of
simplicial sets. Let \(X\) be some simplicial set (connected or
not). Choose some simplicial model \(S^{n}\) for the
\(n\)--sphere. Then we can consider the simplicial set \(X^{S^{n}}\)
of all simplicial maps \(S^{n}\to X\). Evaluation at the canonical
base point of \(S^{n}\) induces a map \(p\colon X^{S^{n}}\to
X\). Observe that the homotopy fiber of \(p\) over some point \(x\in
X\) is precisely \(\RHom_{*}(S^{n}, (X,x))\), the space of
\emph{pointed} maps from \(S^{n}\) to \((X,x)\). So the set of
connected components of this homotopy fiber is precisely
\(\pi_{n}(X,x)\). In this sense, the \(0\)--truncation of the
canonical map \(p\colon X^{S^{n}}\to X\) captures the
\(n\textsuperscript{th}\) homotopy groups of \(X\) at all possible
base points. This motivates the definition of homotopy sheaves in any
combinatorial simplicial model category.

\begin{definition}
  Let \(\mathbf M\) be a combinatorial simplicial model category and
  let \(X\in\mathbf M\). Then the \emph{\Th{n}
    homotopy sheaf} of \(X\) is the homotopy type
  \(\pi_{n}(X)\coloneqq\trunc{0}^{X}(X^{S^{n}})\in\disc(\mathbf
  M/X)\).
\end{definition}

The sheaves \(\pi_{n}(X)\) admit canonical sections. Indeed, the
unique map \(S^{n}\to *\) induces a map \(X\simeq X^{*}\to X^{S^{n}}\)
which is a section of the map \(X^{S^{n}}\to X\). Applying
\(\trunc{0}^{X}\) yields a section of \(\pi_{n}(X)\). Hence, the
homotopy sheaves of \(X\) can be considered as pointed objects in
\(\disc(\mathbf M/X)\). However, to construct a group structure on
higher homotopy sheaves we will need to assume some exactness
properties for \(\mathbf M\). For instance, assuming that \(\mathbf
M\) is a model topos in the sense of \cite{rezkhomotopytoposes} would suffice.

\begin{definition}\label{defn:model-topos}
  A combinatorial simplicial model category \(\mathbf M\) is a
  \emph{model topos} if there is a presentation of \(\mathbf M\) as a
  \emph{left exact} Bousfield localization of a category of simplicial
  presheaves. That is, \(\mathbf M\) is a model topos if there is a
  simplicial Quillen adjunction\footnote{Written in the direction of
    the right adjoint.}
  \[
  \begin{tikzcd}
    \mathbf M \arrow[r, shift right=.7ex, "i"'] & \arrow[l, shift right=.7ex, "L"'] \spshv(\mathbf C)
  \end{tikzcd}
  \]
  for some simplicial category \(\mathbf C\) and the injective model
  structure on \(\spshv(\mathbf C)\) such that \(\LL L\) preserves
  finite homotopy limits and \(\RR i\) is \emph{homotopically fully
    faithful}, \ie~it induces weak equivalences
  \[
  \RHom(X, Y)\simeq\RHom(\RR i(X), \RR i(Y))
  \]
  for all \(X,Y\in\mathbf M\).
\end{definition}

Rezk proves in \cite[Corollary~6.10]{rezkhomotopytoposes} that for
\(X\) an object in a model topos \(\mathbf M\), the slice category
\(\mathbf M/X\) is again a model topos.

However, for applications to motivic homotopy theory, the setting of
model toposes is inconvenient. The \(\AA^1\)--model structure on
simplicial presheaves on smooth schemes over some base is not a model
topos. For this reason we will need to work in a more general setting
than model toposes.\viktor{prove \(\AA^1\)--homotopy is not a model
  topos}

\begin{definition}[{cf.~\cite[Section~7]{gepner-kock}}]
  A \emph{locally cartesian closed category \(C\)} is a category with
  finite limits such that for every morphism \(f\colon X\to Y\) in
  \(C\), the associated pullback functor \(f^{*}\colon C/Y \to C/X\)
  has a right adjoint \(f_{*}\).

  A \emph{locally cartesian closed model category \(\mathbf M\)} is a locally
  cartesian closed category equipped with a model structure such that the
  adjunctions \(f^{*}\dashv f_{*}\) for \(f\) a fibration between fibrant
  objects are Quillen adjunctions for the slice model structures.
\end{definition}

\begin{definition}[{cf.~\cite{cisinski2002theories} and
    \cite{cisinski2006prefaisceaux}}]
  A \emph{Cisinski model structure} on a Grothendieck topos
  \(\mathbf M\) is a cofibrantly generated model structure whose
  cofibrations are precisely the monomorphisms.
\end{definition}

\begin{proposition}[{cf.~\cite{gepner-kock} and \cite{cisinski2002theories}}]\label{prop:proper-cisinski}
  A proper Cisinski model category \(\mathbf M\) is locally cartesian closed.
\end{proposition}
\begin{proof}
  Since \(\mathbf M\) is assumed to be a Grothendieck topos, it is automatically
  locally cartesian closed. Hence, it remains to show that, for \(f\colon A\to
  B\) a fibration between fibrant objects in \(\mathbf M\), the pullback functor
  \(f^*\) is a left Quillen functor. By assumption it preserves cofibrations
  because those are exactly the monomorphisms in a Cisinski model structure.
  Consequently, we need to check that the pullback of an acyclic cofibration
  \(g\colon X\to B\) along \(f\) is a weak equivalence. But this is immediate by
  right properness.
\end{proof}

\begin{corollary}
  The Morel--Voevodsky \(\AA^1\)--model structure on
  \(\spshv(\Sm{S})\) for a base scheme \(S\) is locally cartesian
  closed, as are all its slices.
\end{corollary}
\begin{proof}
  The \(\AA^1\)--model structure is constructed in~\cite{mv} as a left Bousfield
  localization of the Nisnevich--local injective model structure on
  \(\spshv(\Sm{S})\). As such, its underlying category is a Grothendieck topos
  and its cofibrations are precisely the monomorphisms. Furthermore,~\cite{mv}
  proves that it is proper. Hence, \autoref{prop:proper-cisinski} implies that
  it is a locally cartesian closed model category, as are all its slices.
\end{proof}

\begin{lemma}\label{lem:trunc-presheaves}
  Let \(\mathbf C\) be a simplicial category and let
  \(F\in\spshv(\mathbf C)\) be a simplicial presheaf. Then, for every
  \(c\in\mathbf C\) there is a natural weak equivalence
  \((\trunc{n}F)(c)\simeq \trunc{n}F(c)\) of simplicial sets.
\end{lemma}
\begin{proof}
  This follows from the fact that homotopy limits in \(\spshv(\mathbf
  C)\) may be computed pointwise and
  \autoref{prop:truncated-objects-exact-functors}.
\end{proof}

\begin{proposition}[{see \cite[Lemma~6.5.1.2]{mr2522659}}]\label{prop:trunc-products}
  If \(\mathbf M\) is a model topos, then the truncation functors
  \(\trunc{n}\) preserve finite homotopy products.
\end{proposition}
\begin{proof}
  First, let \(F,G\in\spshv(\mathbf C)\) be simplicial presheaves on
  some simplicial category \(\mathbf C\) and consider the canonical
  morphism
  \[
  \trunc{n}(F\times G)\to \trunc{n}F\times\trunc{n}G.
  \]
  To prove that it is a weak equivalence, it will be enough to check
  this after evaluating at all \(c\in\mathbf C\). Hence, by
  \autoref{lem:trunc-presheaves} we have reduced to the case of
  simplicial sets. There it follows from Whitehead's theorem by
  computing homotopy groups of both sides.

  Now choose a simplicial Quillen adjunction
  \[
  \begin{tikzcd}
    \mathbf M \arrow[r, shift right=.7ex, "i"'] & \arrow[l, shift right=.7ex, "L"'] \spshv(\mathbf C)
  \end{tikzcd}
  \]
  as in \autoref{defn:model-topos} and take \(X, Y\in\mathbf M\). By
  our previous considerations we have a natural weak equivalence
  \(\trunc{n}(\RR i(X)\times^{h}\RR i(Y))\simeq \trunc{n}\RR
  i(X)\times^{h}\trunc{n}\RR i(Y)\). Since \(\RR i\) is homotopically
  fully faithful the counit of the adjunction \(\LL L\dashv \RR i\)
  induces a weak equivalence \(\LL L\,\RR i (Z)\simeq Z\) for all
  \(Z\). Consequently, \autoref{prop:left-exact-preserves-trunc}
  provides us with weak equivalences
  \begin{align*}
    \trunc{n}(X\times^{h} Y) &\simeq \trunc{n}(\LL L\,\RR i(X\times^{h} Y)) \simeq \LL L\trunc{n}(\RR i(X)\times^{h} \RR i(Y)) \simeq \\
                         &\simeq \LL L(\trunc{n}\RR i(X)\times^{h} \trunc{n}\RR i(Y)) \simeq \\
                         &\simeq \trunc{n}(\LL L\,\RR i(X)) \times^{h} \trunc{n}(\LL L\,\RR i(Y)) \simeq \\
                         &\simeq \trunc{n}(X) \times^{h} \trunc{n}(Y)
  \end{align*}
  since \(\LL L\) is assumed to preserve finite homotopy limits.
\end{proof}

\Autoref{prop:trunc-products} allows us to produce a group structure
on \(\pi_{n}(X)\) for \(n\geq 1\) if \(X\) is an object in a model
topos \(\mathbf M\): We have the usual (homotopy) cogroup structure on
\(S^{n}\) given by the pinch map \(S^{n}\to S^{n}\vee S^{n}\). This
induces a morphism
\[
X^{S^{n}}\times^{h}_{X} X^{S^{n}} \simeq X^{S^{n}}\times^{h}_{X^{*}}
X^{S^{n}} \simeq X^{S^{n}\vee S^{n}} \to X^{S^{n}}.
\]
By \autoref{prop:trunc-products} the functor \(\trunc{0}^{X}\)
preserves finite homotopy products in \(\mathbf M/X\), so we get a
morphism
\[
\pi_{n}(X)\times_{X}\pi_{n}(X)\isom
\trunc{0}^{X}(X^{S^{n}})\times_{X}\trunc{0}^{X}(X^{S^{n}})\isom
\trunc{0}^{X}(X^{S^{n}\vee S^{n}}) \to \trunc{0}^{X}(X^{S^{n}}) \isom
\pi_{n}(X)
\]
in \(\disc(\mathbf M/X)\). It is then straightforward to check that for \(n\geq
1\) this gives group objects \(\pi_{n}(X)\) in \(\disc(\mathbf M/X)\), which are
abelian for \(n\geq 2\).

Given a map \(f\colon X\to Y\) in \(\mathbf M\) we can consider it as an object
of \(\mathbf M/Y\). As such, \(f\) has homotopy sheaves
\(\pi_{n}(f)\in\disc((\mathbf M/Y)/f)\). There is an equivalence of categories
\((\mathbf M/Y)/f\simeq \mathbf M/X\) which turns out to be a simplicial Quillen
equivalence. Hence, we can consider the homotopy sheaves \(\pi_{n}(f)\) as
objects of \(\disc(\mathbf M/X)\).

One can give a slightly more concrete description of \(\pi_{n}(f)\) as
follows. Consider the homotopy fiber product
\(X^{S^{n}}\times^{h}_{Y^{S^{n}}} Y\) along the canonical section
\(Y\to Y^{S^{n}}\). This is a model for the object \(f^{S^{n}}\in
\mathbf M/Y\). Hence, along the equivalence \((\mathbf M/Y)/f\simeq
\mathbf M/X\), we find that
\[
\trunc{0}^{X}(X^{S^{n}}\times^{h}_{Y^{S^{n}}} Y)\to X
\]
is a model for the homotopy sheaves \(\pi_{n}(f)\in\disc(\mathbf M/X)\).

\begin{remark}\label{rem:homotopy-group-functoriality}
  Rezk proves in \cite[Example~6.13]{rezkhomotopytoposes} that any
  morphism \(f\colon X\to Y\) in a model topos \(\mathbf M\) induces a
  simplicial Quillen adjunction
  \[
  \begin{tikzcd}
    \mathbf M/X \arrow[r, shift right=.7ex, "f_{*}"'] & \arrow[l, shift right=.7ex, "f^{*}"'] \mathbf M/Y
  \end{tikzcd}
  \]
  where the left adjoint \(f^{*}\) is given by homotopy pullback along
  \(f\) and is left exact. Consequently,
  \autoref{prop:left-exact-preserves-trunc} shows that \(f^{*}\)
  commutes with truncation. There is a homotopy commutative diagram
  \[
  \begin{tikzcd}
    X^{S^{n}} \arrow[r] \arrow[d] & f^{*}Y^{S^{n}} \arrow[r] \arrow[d] & Y^{S^{n}} \arrow[d] \\
    X \arrow[r, equals] & X \arrow[r, "f"'] & Y
  \end{tikzcd}
  \]
  and applying \(\trunc{0}^{X}\), we obtain a morphism
  \[
  f_{*}\colon \pi_{n}(X)\simeq\trunc{0}^{X}(X^{S^{n}})\longrightarrow
  \trunc{0}^{X}(f^{*}Y^{S^{n}})\simeq
  f^{*}\trunc{0}^{Y}(Y^{S^{n}})\simeq f^{*}\pi_{n}(Y).
  \]
\end{remark}

\begin{proposition}[{see~\cite[Remark~6.5.1.5]{mr2522659}}]\label{prop:long-exact-sequence}
  Given maps \(f\colon X\to Y\) and \(g\colon Y\to Z\) in a model
  topos \(\mathbf M\), there is a long exact sequence
  \[
  \cdots \to f^{*}\pi_{n+1}(g) \to \pi_{n}(f) \to \pi_{n}(g\circ f) \to f^{*}\pi_{n}(g) \to \cdots
  \]
  of pointed objects in \(\disc(\mathbf M/X)\).
\end{proposition}
\begin{proof}
  We will first construct the relevant maps between homotopy
  sheaves. First, \(g\) induces a natural map
  \[
  g_{*}\colon X^{S^{n}}\times^{h}_{Y^{S^{n}}} Y\to
  X^{S^{n}}\times^{h}_{Z^{S^{n}}} Z
  \]
  and by functoriality of truncation we get at map \(g_{*}\colon
  \pi_{n}(f)\to\pi_{n}(g\circ f)\). Second, applying
  \autoref{rem:homotopy-group-functoriality} to the model topos
  \(\mathbf M/Z\) yields the required morphism \(f_{*}\colon
  \pi_{n}(g\circ f)\to f^{*}\pi_{n}(g)\).
  \viktor{finish constructing the connecting homomorphism and prove exactness}
\end{proof}

\begin{proposition}\label{prop:truncated-homotopy-groups}
  If \(X\) is \(n\)--truncated, then \(\pi_iX = *\) for all \(i>n\).
\end{proposition}
\begin{proof}
  \viktor{write proof.}
\end{proof}

\begin{proposition}\label{prop:connected-homotopy-groups}
  If \(X\) is \(n\)--connected, then \(\pi_iX = *\) for all \(i\leq n\).
\end{proposition}
\begin{proof}
  \viktor{write proof.}
\end{proof}

\begin{proposition}[{cf.~\cite[Prop.~6.2.3.4]{mr2522659} and
    \cite[Prop.~7.8]{rezkhomotopytoposes}}]\label{prop:cech-complex}
  Let \(X\) be some object in a model topos. Let \(U_\bullet\) be the simplicial
  object with \(U_n = X^{n+1}\). Then \(X = U_0\to\hocolim U_\bullet\) is a
  \((-1)\)--truncation of \(X\).
\end{proposition}
\begin{proof}
  \viktor{write proof}
\end{proof}

\begin{proposition}{\viktor{add reference}}
  In a model topos, if \(g\colon Z\to X\) is \((-1)\)--connected and
  \(f\colon Y\to X\) is any morphism, then \(f\) is an equivalence if and only
  if the homotopy pullback \(g^*(f)\colon Y\times_X^h Z\to Z\) is an equivalence.
\end{proposition}
\begin{proof}
  \viktor{write proof}
\end{proof}

\section{Obstruction Theory}

Using truncation functors we can define Postnikov towers in any
combinatorial simplicial model category. Recall that a \emph{tower} in
\(\mathbf M\) is a diagram of the form
\[
\cdots \to X_{n+1}\to X_{n}\to X_{n-1}\to \cdots \to X_{0}
\]
and a \emph{convergent tower} in \(\mathbf M\) is a diagram
\[
X_{\infty}\xrightarrow{\pi} \cdots \to X_{n+1}\to X_{n}\to\cdots\to
X_{0}
\]
exhibiting \(X_{\infty}\) as the homotopy limit of the tower
\(\{X_{n}\}_{n\in\NN}\), \ie~such that the morphism
\[
X_{\infty}\xrightarrow{\pi}\holim_{n\in\NN} X_{n}
\]
is a weak equivalence.

\begin{definition}
  Let \(\mathbf M\) be a combinatorial simplicial model category and
  \(X\in\mathbf M\). The tower
  \[
  \cdots\to\trunc{n} X\to\trunc{n-1} X\to\cdots\to\trunc{1}
  X\to\trunc{0}X
  \]
  is called the \emph{Postnikov tower} for \(X\). The Postnikov tower
  for \(X\) is said to \emph{converge} if
  \[
  X\to\cdots\to\trunc{n} X\to\trunc{n-1} X\to\cdots\to\trunc{1}
  X\to\trunc{0}X
  \]
  is a convergent tower in \(\mathbf M\).
\end{definition}

\begin{definition}[{cf.~\cite[Definition~7.2.2.20]{mr2522659}}]
  An object \(E\) in a combinatorial simplicial model category \(\mathbf M\)
  which is \((n-1)\)--connected and \(n\)--truncated is an \emph{\(n\)--gerbe}.
  An \(n\)--gerbe in \(\mathbf M/X\) for some \(X\in\mathbf M\) is an
  \emph{\(n\)--gerbe over \(X\)}.

  An \(n\)--gerbe \(E\) equipped with a morphism \(*\to E\) is an
  \emph{Eilenberg--Mac~Lane object in degree \(n\)}.
\end{definition}

\begin{example}
  By definition, the canonical map \(\trunc{n}X \to \trunc{n-1}X\) is an
  \(n\)--gerbe over \(\trunc{n-1}X\).
\end{example}

Given an Eilenberg--Mac~Lane object \(E\) in degree
\(n\),~\autoref{prop:truncated-homotopy-groups}
and~\autoref{prop:connected-homotopy-groups} imply that \(E\) has a single
nontrivial homotopy sheaf \(\pi_n(E)\in\disc(\mathbf M/E)\). If \(n\geq 2\) then
\(\pi_n(E)\) is always equivalent to the pullback of a sheaf of abelian groups
\(A\in\disc(\mathbf M)\)\viktor{Prove this.
  insert~\cite[Lemma~7.2.1.13]{mr2522659} maybe?}. However, this need not be the
case for \(n\leq 1\).

Given a group object \(G\) in a model topos \(\mathbf M\), there
always is a \emph{delooping} \(\deloop{G}\in\mathbf M\). This is a naturally pointed
and connected object of \(\mathbf M\) such that \(\Omega\deloop{G} \simeq
G\). It can be constructed as follows. The group object
\(G\) determines a simplicial object
\[
  \actgrp{*}{G} = \begin{tikzcd}
    \cdots \arrow[r, shift left=2.4ex] \arrow[r, shift left=1.2ex] \arrow[r]
    \arrow[r, shift left=-1.2ex] \arrow[r, shift left=-2.4ex] & G\times G\times G \arrow[r, shift left=1.8ex] \arrow[r, shift
    left=.6ex] \arrow[r, shift left=-.6ex] \arrow[r, shift left=-1.8ex] & G\times G \arrow[r, shift left=1.2ex] \arrow[r]
    \arrow[r, shift left=-1.2ex] & G \arrow[r, shift left=.6ex]
    \arrow[r, shift left=-.6ex] & *
  \end{tikzcd}
\]
and \(\deloop{G} = \hocolim \actgrp{*}{G}\) is defined to be the
homotopy colimit of this diagram.\viktor{compute loops of this beast, use
  descent statement by Rezk}

\begin{proposition}\label{prop:deloop-products}
  Let \(\mathbf M\) be a model topos. There is a functor \(F\) from the category
  of group objects in \(\mathbf M\) to \(\mathbf M\) which is compatible with
  products and such that \(F(G)\simeq\deloop{G}\) for all group objects \(G\) in
  \(\mathbf M\).
\end{proposition}

\begin{proof}
  Choose a presentation for the model topos \(\mathbf M\) as a left exact
  localization
  \[
    \begin{tikzcd}
      \mathbf M \arrow[r, shift right=.7ex, "i"'] & \arrow[l, shift right=.7ex,
      "L"'] \spshv(\mathbf C).
    \end{tikzcd}
  \]
  Any such presentation allows one to transfer a functor \(F\) as in the
  proposition from \(\spshv(\mathbf C)\) to \(\mathbf M\). Hence, without loss
  of generality, we can assume \(\mathbf M = \spshv(\mathbf C)\).

  Given a simplicial presheaf of groups in \(\spshv(\mathbf C)\) the
  construction \(\actgrp{*}{G}\) yields a bisimplicial presheaf over \(\mathbf
  C\). Its diagonal \(d(\actgrp{*}{G})\) is weakly equivalent to its homotopy
  colimit\viktor{find a proper reference}, hence \(d(\actgrp{*}{G})\) is a model
  for the delooping \(\deloop{G}\) of \(G\). Furthermore, this way of
  constructing \(\deloop{G}\) is evidently compatible with products\viktor{maybe
    not so evidently?}; as a functor from the category of simplicial presheaves
  of groups on \(\mathbf C\) to \(\spshv(\mathbf C)\).
\end{proof}

An abelian group object \(A\) in \(\mathbf M\) can equivalently be regarded as
an abelian group object in the category of group objects in \(\mathbf M\). Since
product preserving functors send abelian group objects to abelian group objects,
\autoref{prop:deloop-products} implies that \(\deloop{A}\) is again an abelian
group object in \(\mathbf M\). It follows that deloopings \(\deloop[n]{A}\) of
all orders \(n\in\NN\) exist.

\begin{definition}
  Given a sheaf of abelian groups \(A\in\disc(\mathbf M)\) in a model topos
  \(\mathbf M\) and \(n\in\mathbb N\), the \(n\)--fold delooping
  \(\deloop[n]{A}\) of \(A\) is the standard Eilenberg--Mac~Lane object \(K(A,n)\).

  Similarly, for a sheaf of groups \(G\in\disc(\mathbf M)\), the delooping
  \(\deloop{G}\) is the standard Eilenberg--Mac~Lane object \(K(G,1)\).
\end{definition}

\begin{proposition}\label{prop:uniqueness-em-objects}
  Let \(E\) be a degree \(n\) Eilenberg--Mac~Lane object in a model topos \(\mathbf M\).
  Assume that there is a sheaf of groups \(G\in\disc(\mathbf M)\) such that
  \(\pi_n(E)\) is equivalent to the pullback of \(G\) along the canonical morphism
  \(E\to *\). Then there is a base point preserving equivalence \(E\to K(G,n)\).
\end{proposition}
\begin{proof}
  For \(n=0\) this is trivial. Let \(n\geq 1\) and assume \(E\) is a degree
  \(n\) Eilenberg--Mac~Lane object with base point \(e\colon *\to E\). By the
  factorization lemma of \cite{MR0341469} there is a factorization \(e = p\circ
  i\) with \(p\colon P\to E\) a fibration and \(i\colon *\to P\) right inverse
  to an acyclic fibration \(r\colon P\to *\).

  Since \(p\) is a fibration and \(\mathbf M\) is right proper, the ordinary
  pullback \(P\times_E *\) is a model for the homotopy pullback \(*\times_E^h *\),
  the loop space \(\Omega_e E\).
\end{proof}
\begin{remark}
  The assumption that \(\pi_n(E)\) be a pullback in
  \autoref{prop:uniqueness-em-objects} is automatic for \(n\geq
  2\).\viktor{reference connectedness statements}
\end{remark}

\begin{proposition}\label{prop:gerbe-classification}
  Assume \(E\) is an \(n\)--gerbe in a model topos \(\mathbf M\). Then \(E\times
  E\) equipped with the diagonal \(E\to E\times E\) is a degree \(n\)
  Eilenberg--Mac-Lane object in \(\mathbf M/E\). If additionally \(\pi_n(E)
  \simeq f^*G\) for \(f\colon E\to *\) and some sheaf of groups
  \(G\in\disc(\mathbf M)\), then there is a morphism \(g\colon * \to K(G,n)\)
  whose homotopy fiber is equivalent to \(E\).
\end{proposition}
\begin{proof}
\viktor{write proof}
\end{proof}

\begin{theorem}
  Given a map \(f\colon Y\to \trunc{n}X\), there exists a lift \(g\colon
  Y\to\trunc{n+1}X\) making the diagram
  \[
    \begin{tikzcd}
      & \trunc{n+1} X \arrow[d] \\
      Y \arrow[r, "f"'] \arrow[ru, "g"] & \trunc{n} X
    \end{tikzcd}
  \]
  commute up to homotopy if and only if the associated class in \(H^{n+2}(Y,
  \pi_{n+1}X)\) vanishes.
\end{theorem}

\printbibliography

\listoftodos
\end{document}
%%% Local Variables:
%%% mode: latex
%%% TeX-master: t
%%% TeX-command-default: "LatexMk"
%%% End:
